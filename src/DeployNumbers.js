import { ethers } from "ethers";

const provider = new ethers.providers.JsonRpcProvider();

const signer = provider.getSigner(0);

// let abi = [
//     "event ValueChanged(address indexed author, string oldValue, string newValue)",
//     "constructor(string value)",
//     "function getValue() view returns (string value)",
//     "function setValue(string value)"
// ];

let abi = [
    "function add(uint256 x, uint256 y) public",
    "function get() public view returns (uint256)"
];

let bytecode = '0x60806040526000805534801561001457600080fd5b506101f4806100246000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c80636d4ce63c1461003b578063771602f714610059575b600080fd5b610043610075565b60405161005091906100ad565b60405180910390f35b610073600480360381019061006e91906100f9565b61007e565b005b60008054905090565b808261008a9190610168565b6000819055505050565b6000819050919050565b6100a781610094565b82525050565b60006020820190506100c2600083018461009e565b92915050565b600080fd5b6100d681610094565b81146100e157600080fd5b50565b6000813590506100f3816100cd565b92915050565b600080604083850312156101105761010f6100c8565b5b600061011e858286016100e4565b925050602061012f858286016100e4565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061017382610094565b915061017e83610094565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156101b3576101b2610139565b5b82820190509291505056fea2646970667358221220295920cdc68ce160a18ee60e799a306e50848c6e5f2f3419b77525d8df51d7c864736f6c634300080c0033';

// let b = 'dffdg';

(async function() {
    
    let factory = new ethers.ContractFactory(abi, bytecode, signer);
    
    let contract = await factory.deploy();

    console.log("contract address: " + contract.address);

    console.log("contract deploy hash: " + contract.deployTransaction.hash);

    await contract.deployed();

})();


// contract address: 0xDbA3e05E06fEd4b2B52a5828C50aD44448b27DDC
// contract deploy hash: 0x8957cfad1046ca2d2fc24b9c658a7e3a00b1cfd539bcceed0119185deaff9ee6
